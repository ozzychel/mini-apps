class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      tabCount: 0,
      checkoutButtonVisible: true,
      nameField: "",
      emailField: "",
      passwordField: ""
    };
  }

  componentDidMount() {}

  checkoutOnClickHandler() {
    var newNum = this.state.tabCount + 1;
    this.setState({
      tabCount: newNum,
      checkoutButtonVisible: false
    });
  }

  handleNameChange(value) {
    this.setState({
      nameField: value
    });
  }

  getNameState() {
    return this.state.nameField;
  }

  handleEmailChange(value) {
    this.setState({
      emailField: value
    });
  }

  getEmailState() {
    return this.state.emailField;
  }

  handlePasswordChange(value) {
    this.setState({
      passwordField: value
    });
  }

  getPasswordState() {
    return this.state.passwordField;
  }

  submitPersonalData() {
    if (this.state.nameField.length !== 0 || this.state.emailField.length !== 0 || this.state.passwordField.length !== 0) {
      var newObj = {
        name: this.state.nameField,
        email: this.state.emailField,
        password: this.state.passwordField
      };
      this.postPersonalData(newObj, (err, result) => {
        if (err) {
          console.log('POST ERROR');
          console.log(err);
        } else {
          console.log('ITEM POSTED');
          console.log(result);
        }
      });
    }
  }

  postPersonalData(newObj, callback) {
    $.ajax({
      url: 'http://localhost:3000/api/users',
      method: 'POST',
      data: newObj,
      success: data => {
        callback(null, data);
      },
      error: err => {
        callback(err, null);
      }
    });
  }

  tabReturn() {
    if (this.state.tabCount === 0) {
      return /*#__PURE__*/React.createElement("h1", null);
    } else if (this.state.tabCount === 1) {
      return /*#__PURE__*/React.createElement(PersonalData, {
        checkoutOnClickHandler: this.checkoutOnClickHandler.bind(this),
        handleNameChange: this.handleNameChange.bind(this),
        getNameState: this.getNameState.bind(this),
        handleEmailChange: this.handleEmailChange.bind(this),
        getEmailState: this.getEmailState.bind(this),
        handlePasswordChange: this.handlePasswordChange.bind(this),
        getPasswordState: this.getPasswordState.bind(this),
        submitPersonalData: this.submitPersonalData.bind(this)
      });
    } else if (this.state.tabCount === 2) {
      return /*#__PURE__*/React.createElement(Address, {
        checkoutOnClickHandler: this.checkoutOnClickHandler.bind(this)
      });
    } else if (this.state.tabCount === 3) {
      return /*#__PURE__*/React.createElement(Payment, {
        checkoutOnClickHandler: this.checkoutOnClickHandler.bind(this)
      });
    } else {
      return /*#__PURE__*/React.createElement(Summary, null);
    }
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
      type: "button",
      className: this.state.checkoutButtonVisible ? 'checkout-btn-vis' : 'checkout-btn-none',
      onClick: this.checkoutOnClickHandler.bind(this)
    }, "Checkout"), this.tabReturn());
  }

}

var PersonalData = ({
  checkoutOnClickHandler,
  handleNameChange,
  getNameState,
  getEmailState,
  handleEmailChange,
  getPasswordState,
  handlePasswordChange,
  submitPersonalData
}) => /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Personal"), /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("label", null, "Full Name", /*#__PURE__*/React.createElement("input", {
  type: "text",
  placeholder: "Type here...",
  value: getNameState(),
  onChange: () => {
    handleNameChange(event.target.value);
  }
}))), /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("label", null, "Email", /*#__PURE__*/React.createElement("input", {
  type: "text",
  placeholder: "Type here...",
  value: getEmailState(),
  onChange: () => {
    handleEmailChange(event.target.value);
  }
}))), /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("label", null, "Password", /*#__PURE__*/React.createElement("input", {
  type: "text",
  placeholder: "Type here...",
  value: getPasswordState(),
  onChange: () => {
    handlePasswordChange(event.target.value);
  }
}))), /*#__PURE__*/React.createElement("button", {
  type: "button",
  onClick: () => {
    checkoutOnClickHandler();
    submitPersonalData();
  }
}, "Next"));

var Address = ({
  checkoutOnClickHandler
}) => /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Address"), /*#__PURE__*/React.createElement("button", {
  type: "button",
  onClick: checkoutOnClickHandler
}, "Next"));

var Payment = ({
  checkoutOnClickHandler
}) => /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Payment"), /*#__PURE__*/React.createElement("button", {
  type: "button",
  onClick: checkoutOnClickHandler
}, "Next"));

var Summary = () => /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Summary"));

ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById('app'));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NsaWVudC9BcHAuanN4Il0sIm5hbWVzIjpbIkFwcCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsInN0YXRlIiwidGFiQ291bnQiLCJjaGVja291dEJ1dHRvblZpc2libGUiLCJuYW1lRmllbGQiLCJlbWFpbEZpZWxkIiwicGFzc3dvcmRGaWVsZCIsImNvbXBvbmVudERpZE1vdW50IiwiY2hlY2tvdXRPbkNsaWNrSGFuZGxlciIsIm5ld051bSIsInNldFN0YXRlIiwiaGFuZGxlTmFtZUNoYW5nZSIsInZhbHVlIiwiZ2V0TmFtZVN0YXRlIiwiaGFuZGxlRW1haWxDaGFuZ2UiLCJnZXRFbWFpbFN0YXRlIiwiaGFuZGxlUGFzc3dvcmRDaGFuZ2UiLCJnZXRQYXNzd29yZFN0YXRlIiwic3VibWl0UGVyc29uYWxEYXRhIiwibGVuZ3RoIiwibmV3T2JqIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJwb3N0UGVyc29uYWxEYXRhIiwiZXJyIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsImNhbGxiYWNrIiwiJCIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwic3VjY2VzcyIsImVycm9yIiwidGFiUmV0dXJuIiwiYmluZCIsInJlbmRlciIsIlBlcnNvbmFsRGF0YSIsImV2ZW50IiwidGFyZ2V0IiwiQWRkcmVzcyIsIlBheW1lbnQiLCJTdW1tYXJ5IiwiUmVhY3RET00iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxHQUFOLFNBQWtCQyxLQUFLLENBQUNDLFNBQXhCLENBQWtDO0FBQ2hDQyxFQUFBQSxXQUFXLENBQUNDLEtBQUQsRUFBUTtBQUNqQixVQUFNQSxLQUFOO0FBQ0EsU0FBS0MsS0FBTCxHQUFhO0FBQ1hDLE1BQUFBLFFBQVEsRUFBRSxDQURDO0FBRVhDLE1BQUFBLHFCQUFxQixFQUFFLElBRlo7QUFHWEMsTUFBQUEsU0FBUyxFQUFFLEVBSEE7QUFJWEMsTUFB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QWlCLENBQUMyQixLQUFLLENBQUNDLE1BQU4sQ0FBYTlCLEtBQWQsQ0FBakI7QUFBc0M7QUFEckQsRUFERixDQURGLENBUkYsZUFjRSwrQ0FDRSw0REFDRTtBQUFPLEVBQUEsSUFBSSxFQUFDLE1BQVo7QUFBbUIsRUFBQSxXQUFXLEVBQUMsY0FBL0I7QUFBOEMsRUFBQSxLQUFLLEVBQUVLLGdCQUFnQixFQUFyRTtBQUNBLEVBQUEsUUFBUSxFQUFFLE1BQUk7QUFBQ0QsSUFBQUEsb0JBQW9CLENBQUN5QixLQUFLLENBQUNDLE1BQU4sQ0FBYTlCLEtBQWQsQ0FBcEI7QUFBeUM7QUFEeEQsRUFERixDQURGLENBZEYsZUFvQkU7QUFBUSxFQUFBLElBQUksRUFBQyxRQUFiO0FBQXNCLEVBQUEsT0FBTyxFQUUzQixNQUFJO0FBQ0ZKLElBQUFBLHNCQUFzQjtBQUN0QlUsSUFBQUEsa0JBQWtCO0FBQ25CO0FBTEgsVUFwQkYsQ0FIRjs7QUFrQ0EsSUFBSXlCLE9BQU8sR0FBRyxDQUFDO0FBQUNuQyxFQUFBQTtBQUFELENBQUQsa0JBQ1osOENBQ0UsMENBREYsZUFFRTtBQUFRLEVBQUEsSUFBSSxFQUFDLFFBQWI7QUFBc0IsRUFBQSxPQUFPLEVBQzNCQTtBQURGLFVBRkYsQ0FERjs7QUFTQSxJQUFJb0MsT0FBTyxHQUFHLENBQUM7QUFBQ3BDLEVBQUFBO0FBQUQsQ0FBRCxrQkFDWiw4Q0FDRSwwQ0FERixlQUVFO0FBQVEsRUFBQSxJQUFJLEVBQUMsUUFBYjtBQUFzQixFQUFBLE9BQU8sRUFDM0JBO0FBREYsVUFGRixDQURGOztBQVNBLElBQUlxQyxPQUFPLEdBQUcsbUJBQ1osOENBQ0UsMENBREYsQ0FERjs7QUFNQUMsUUFBUSxDQUFDUCxNQUFULGVBQ0Usb0JBQUMsR0FBRCxPQURGLEVBRUVRLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixLQUF4QixDQUZGIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdGFiQ291bnQ6IDAsXG4gICAgICBjaGVja291dEJ1dHRvblZpc2libGU6IHRydWUsXG4gICAgICBuYW1lRmllbGQ6IFwiXCIsXG4gICAgICBlbWFpbEZpZWxkOlwiXCIsXG4gICAgICBwYXNzd29yZEZpZWxkOlwiXCJcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpe1xuICB9XG5cbiAgY2hlY2tvdXRPbkNsaWNrSGFuZGxlciAoKSB7XG4gICAgdmFyIG5ld051bSA9IHRoaXMuc3RhdGUudGFiQ291bnQgKyAxO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdGFiQ291bnQ6IG5ld051bSxcbiAgICAgIGNoZWNrb3V0QnV0dG9uVmlzaWJsZTogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlTmFtZUNoYW5nZSAodmFsdWUpIHt0aGlzLnNldFN0YXRlKHsgbmFtZUZpZWxkOiB2YWx1ZSB9KX1cbiAgZ2V0TmFtZVN0YXRlICgpIHtyZXR1cm4gdGhpcy5zdGF0ZS5uYW1lRmllbGR9XG5cbiAgaGFuZGxlRW1haWxDaGFuZ2UgKHZhbHVlKSB7dGhpcy5zZXRTdGF0ZSh7IGVtYWlsRmllbGQ6IHZhbHVlIH0pfVxuICBnZXRFbWFpbFN0YXRlICgpIHtyZXR1cm4gdGhpcy5zdGF0ZS5lbWFpbEZpZWxkfVxuXG4gIGhhbmRsZVBhc3N3b3JkQ2hhbmdlICh2YWx1ZSkge3RoaXMuc2V0U3RhdGUoeyBwYXNzd29yZEZpZWxkOiB2YWx1ZSB9KX1cbiAgZ2V0UGFzc3dvcmRTdGF0ZSAoKSB7cmV0dXJuIHRoaXMuc3RhdGUucGFzc3dvcmRGaWVsZH1cblxuICBzdWJtaXRQZXJzb25hbERhdGEgKCkge1xuICAgIGlmKHRoaXMuc3RhdGUubmFtZUZpZWxkLmxlbmd0aCAhPT0gMCB8fCB0aGlzLnN0YXRlLmVtYWlsRmllbGQubGVuZ3RoICE9PTAgfHxcbiAgICB0aGlzLnN0YXRlLnBhc3N3b3JkRmllbGQubGVuZ3RoICE9PTApIHtcbiAgICAgIHZhciBuZXdPYmogPSB7XG4gICAgICAgIG5hbWU6IHRoaXMuc3RhdGUubmFtZUZpZWxkLFxuICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5lbWFpbEZpZWxkLFxuICAgICAgICBwYXNzd29yZDogdGhpcy5zdGF0ZS5wYXNzd29yZEZpZWxkfVxuICAgICAgdGhpcy5wb3N0UGVyc29uYWxEYXRhKG5ld09iaiwgKGVyciwgcmVzdWx0KT0+e1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1BPU1QgRVJST1InKVxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnSVRFTSBQT1NURUQnKVxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBwb3N0UGVyc29uYWxEYXRhIChuZXdPYmosIGNhbGxiYWNrKSB7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDonaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS91c2VycycsXG4gICAgICBtZXRob2Q6J1BPU1QnLFxuICAgICAgZGF0YTogbmV3T2JqLFxuICAgICAgc3VjY2VzczogKGRhdGEpID0+IHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgZGF0YSlcbiAgICAgIH0sXG4gICAgICBlcnJvcjogKGVycikgPT4ge1xuICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHRhYlJldHVybiAoKSB7XG4gICAgaWYodGhpcy5zdGF0ZS50YWJDb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gPGgxPjwvaDE+XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnRhYkNvdW50ID09PSAxKSB7XG4gICAgICAgIHJldHVybiA8UGVyc29uYWxEYXRhXG4gICAgICAgIGNoZWNrb3V0T25DbGlja0hhbmRsZXI9e3RoaXMuY2hlY2tvdXRPbkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpfVxuICAgICAgICBoYW5kbGVOYW1lQ2hhbmdlPXt0aGlzLmhhbmRsZU5hbWVDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgZ2V0TmFtZVN0YXRlPXt0aGlzLmdldE5hbWVTdGF0ZS5iaW5kKHRoaXMpfVxuICAgICAgICBoYW5kbGVFbWFpbENoYW5nZT17dGhpcy5oYW5kbGVFbWFpbENoYW5nZS5iaW5kKHRoaXMpfVxuICAgICAgICBnZXRFbWFpbFN0YXRlPXt0aGlzLmdldEVtYWlsU3RhdGUuYmluZCh0aGlzKX1cbiAgICAgICAgaGFuZGxlUGFzc3dvcmRDaGFuZ2U9e3RoaXMuaGFuZGxlUGFzc3dvcmRDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgZ2V0UGFzc3dvcmRTdGF0ZT17dGhpcy5nZXRQYXNzd29yZFN0YXRlLmJpbmQodGhpcyl9XG4gICAgICAgIHN1Ym1pdFBlcnNvbmFsRGF0YT17dGhpcy5zdWJtaXRQZXJzb25hbERhdGEuYmluZCh0aGlzKX1cbiAgICAgICAgLz5cbiAgICB9IGVsc2UgaWYodGhpcy5zdGF0ZS50YWJDb3VudCA9PT0gMikge1xuICAgICAgICByZXR1cm4gPEFkZHJlc3NcbiAgICAgICAgY2hlY2tvdXRPbkNsaWNrSGFuZGxlcj17dGhpcy5jaGVja291dE9uQ2xpY2tIYW5kbGVyLmJpbmQodGhpcyl9XG4gICAgICAgIC8+XG4gICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUudGFiQ291bnQgPT09IDMpIHtcbiAgICAgICAgcmV0dXJuIDxQYXltZW50XG4gICAgICAgIGNoZWNrb3V0T25DbGlja0hhbmRsZXI9e3RoaXMuY2hlY2tvdXRPbkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpfVxuICAgICAgICAvPlxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiA8U3VtbWFyeSAvPlxuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxidXR0b24gdHlwZT0nYnV0dG9uJ1xuICAgICAgICBjbGFzc05hbWU9e3RoaXMuc3RhdGUuY2hlY2tvdXRCdXR0b25WaXNpYmxlID8gJ2NoZWNrb3V0LWJ0bi12aXMnIDogJ2NoZWNrb3V0LWJ0bi1ub25lJ31cbiAgICAgICAgb25DbGljaz17dGhpcy5jaGVja291dE9uQ2xpY2tIYW5kbGVyLmJpbmQodGhpcyl9XG4gICAgICAgID5DaGVja291dDwvYnV0dG9uPlxuICAgICAgICB7dGhpcy50YWJSZXR1cm4oKX1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG52YXIgUGVyc29uYWxEYXRhID0gKHtcbiAgY2hlY2tvdXRPbkNsaWNrSGFuZGxlciwgaGFuZGxlTmFtZUNoYW5nZSwgZ2V0TmFtZVN0YXRlLCBnZXRFbWFpbFN0YXRlLCBoYW5kbGVFbWFpbENoYW5nZSwgZ2V0UGFzc3dvcmRTdGF0ZSwgaGFuZGxlUGFzc3dvcmRDaGFuZ2UsIHN1Ym1pdFBlcnNvbmFsRGF0YVxufSkgPT4gKFxuICA8ZGl2PlxuICAgIDxoMT5QZXJzb25hbDwvaDE+XG4gICAgPGZvcm0+XG4gICAgICA8bGFiZWw+RnVsbCBOYW1lXG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPSdUeXBlIGhlcmUuLi4nIHZhbHVlPXtnZXROYW1lU3RhdGUoKX1cbiAgICAgICAgb25DaGFuZ2U9eygpPT57aGFuZGxlTmFtZUNoYW5nZShldmVudC50YXJnZXQudmFsdWUpfX0+PC9pbnB1dD5cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9mb3JtPlxuICAgIDxmb3JtPlxuICAgICAgPGxhYmVsPkVtYWlsXG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPSdUeXBlIGhlcmUuLi4nIHZhbHVlPXtnZXRFbWFpbFN0YXRlKCl9XG4gICAgICAgIG9uQ2hhbmdlPXsoKT0+e2hhbmRsZUVtYWlsQ2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSl9fT48L2lucHV0PlxuICAgICAgPC9sYWJlbD5cbiAgICA8L2Zvcm0+XG4gICAgPGZvcm0+XG4gICAgICA8bGFiZWw+UGFzc3dvcmRcbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9J1R5cGUgaGVyZS4uLicgdmFsdWU9e2dldFBhc3N3b3JkU3RhdGUoKX1cbiAgICAgICAgb25DaGFuZ2U9eygpPT57aGFuZGxlUGFzc3dvcmRDaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKX19PjwvaW5wdXQ+XG4gICAgICA8L2xhYmVsPlxuICAgIDwvZm9ybT5cbiAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbicgb25DbGljaz17XG5cbiAgICAgICgpPT57XG4gICAgICAgIGNoZWNrb3V0T25DbGlja0hhbmRsZXIoKVxuICAgICAgICBzdWJtaXRQZXJzb25hbERhdGEoKVxuICAgICAgfVxuXG4gICAgICB9Pk5leHQ8L2J1dHRvbj5cbiAgPC9kaXY+XG4pXG5cbnZhciBBZGRyZXNzID0gKHtjaGVja291dE9uQ2xpY2tIYW5kbGVyfSkgPT4gKFxuICA8ZGl2PlxuICAgIDxoMT5BZGRyZXNzPC9oMT5cbiAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbicgb25DbGljaz17XG4gICAgICBjaGVja291dE9uQ2xpY2tIYW5kbGVyXG4gICAgICB9Pk5leHQ8L2J1dHRvbj5cbiAgPC9kaXY+XG4pXG5cbnZhciBQYXltZW50ID0gKHtjaGVja291dE9uQ2xpY2tIYW5kbGVyfSkgPT4gKFxuICA8ZGl2PlxuICAgIDxoMT5QYXltZW50PC9oMT5cbiAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbicgb25DbGljaz17XG4gICAgICBjaGVja291dE9uQ2xpY2tIYW5kbGVyXG4gICAgICB9Pk5leHQ8L2J1dHRvbj5cbiAgPC9kaXY+XG4pXG5cbnZhciBTdW1tYXJ5ID0gKCkgPT4gKFxuICA8ZGl2PlxuICAgIDxoMT5TdW1tYXJ5PC9oMT5cbiAgPC9kaXY+XG4pXG5cblJlYWN0RE9NLnJlbmRlcihcbiAgPEFwcCAvPixcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpXG4pXG5cbiJdfQ==