class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      tabCount: 0,
      checkoutButtonVisible: true,
      nameField: "",
      emailField: "",
      passwordField: ""
    };
  }

  componentDidMount() {}

  checkoutOnClickHandler() {
    var newNum = this.state.tabCount + 1;
    this.setState({
      tabCount: newNum,
      checkoutButtonVisible: false
    });
  }

  handleNameChange(value) {
    this.setState({
      nameField: value
    });
  }

  getNameState() {
    return this.state.nameField;
  }

  handleEmailChange(value) {
    this.setState({
      emailField: value
    });
  }

  getEmailState() {
    return this.state.emailField;
  }

  handlePasswordChange(value) {
    this.setState({
      passwordField: value
    });
  }

  getPasswordState() {
    return this.state.passwordField;
  }

  submitPersonalData() {
    if (this.state.nameField.length !== 0 || this.state.emailField.length !== 0 || this.state.passwordField.length !== 0) {
      var newObj = {
        name: this.state.nameField,
        email: this.state.emailField,
        password: this.state.passwordField
      };
      this.postPersonalData(newObj, (err, result) => {
        if (err) {
          console.log('POST ERROR');
          console.log(err);
        } else {
          console.log('ITEM POSTED');
          console.log(result);
        }
      });
    }
  }

  postPersonalData(newObj, callback) {
    $.ajax({
      url: 'http://localhost:3000/api/users',
      method: 'POST',
      data: newObj,
      success: data => {
        callback(null, data);
      },
      error: err => {
        callback(err, null);
      }
    });
  }

  tabReturn() {
    if (this.state.tabCount === 0) {
      return /*#__PURE__*/React.createElement("h1", null);
    } else if (this.state.tabCount === 1) {
      return /*#__PURE__*/React.createElement(PersonalData, {
        checkoutOnClickHandler: this.checkoutOnClickHandler.bind(this),
        handleNameChange: this.handleNameChange.bind(this),
        getNameState: this.getNameState.bind(this),
        handleEmailChange: this.handleEmailChange.bind(this),
        getEmailState: this.getEmailState.bind(this),
        handlePasswordChange: this.handlePasswordChange.bind(this),
        getPasswordState: this.getPasswordState.bind(this),
        submitPersonalData: this.submitPersonalData.bind(this)
      });
    } else if (this.state.tabCount === 2) {
      return /*#__PURE__*/React.createElement(Address, {
        checkoutOnClickHandler: this.checkoutOnClickHandler.bind(this)
      });
    } else if (this.state.tabCount === 3) {
      return /*#__PURE__*/React.createElement(Payment, {
        checkoutOnClickHandler: this.checkoutOnClickHandler.bind(this)
      });
    } else {
      return /*#__PURE__*/React.createElement(Summary, null);
    }
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("button", {
      type: "button",
      className: this.state.checkoutButtonVisible ? 'checkout-btn-vis' : 'checkout-btn-none',
      onClick: this.checkoutOnClickHandler.bind(this)
    }, "Checkout"), this.tabReturn());
  }

}

var PersonalData = ({
  checkoutOnClickHandler,
  handleNameChange,
  getNameState,
  getEmailState,
  handleEmailChange,
  getPasswordState,
  handlePasswordChange,
  submitPersonalData
}) => /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Personal"), /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("label", null, "Full Name", /*#__PURE__*/React.createElement("input", {
  type: "text",
  placeholder: "Type here...",
  value: getNameState(),
  onChange: () => {
    handleNameChange(event.target.value);
  }
}))), /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("label", null, "Email", /*#__PURE__*/React.createElement("input", {
  type: "text",
  placeholder: "Type here...",
  value: getEmailState(),
  onChange: () => {
    handleEmailChange(event.target.value);
  }
}))), /*#__PURE__*/React.createElement("form", null, /*#__PURE__*/React.createElement("label", null, "Password", /*#__PURE__*/React.createElement("input", {
  type: "text",
  placeholder: "Type here...",
  value: getPasswordState(),
  onChange: () => {
    handlePasswordChange(event.target.value);
  }
}))), /*#__PURE__*/React.createElement("button", {
  type: "button",
  onClick: () => {
    checkoutOnClickHandler();
    submitPersonalData();
  }
}, "Next"));

var Address = ({
  checkoutOnClickHandler
}) => /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Address"), /*#__PURE__*/React.createElement("button", {
  type: "button",
  onClick: checkoutOnClickHandler
}, "Next"));

var Payment = ({
  checkoutOnClickHandler
}) => /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Payment"), /*#__PURE__*/React.createElement("button", {
  type: "button",
  onClick: checkoutOnClickHandler
}, "Next"));

var Summary = () => /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", null, "Summary"));

ReactDOM.render( /*#__PURE__*/React.createElement(App, null), document.getElementById('app'));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NsaWVudC9BcHAuanN4Il0sIm5hbWVzIjpbIkFwcCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsInN0YXRlIiwidGFiQ291bnQiLCJjaGVja291dEJ1dHRvblZpc2libGUiLCJuYW1lRmllbGQiLCJlbWFpbEZpZWxkIiwicGFzc3dvcmRGaWVsZCIsImNvbXBvbmVudERpZE1vdW50IiwiY2hlY2tvdXRPbkNsaWNrSGFuZGxlciIsIm5ld051bSIsInNldFN0YXRlIiwiaGFuZGxlTmFtZUNoYW5nZSIsInZhbHVlIiwiZ2V0TmFtZVN0YXRlIiwiaGFuZGxlRW1haWxDaGFuZ2UiLCJnZXRFbWFpbFN0YXRlIiwiaGFuZGxlUGFzc3dvcmRDaGFuZ2UiLCJnZXRQYXNzd29yZFN0YXRlIiwic3VibWl0UGVyc29uYWxEYXRhIiwibGVuZ3RoIiwibmV3T2JqIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJwb3N0UGVyc29uYWxEYXRhIiwiZXJyIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsImNhbGxiYWNrIiwiJCIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwic3VjY2VzcyIsImVycm9yIiwidGFiUmV0dXJuIiwiYmluZCIsInJlbmRlciIsIlBlcnNvbmFsRGF0YSIsImV2ZW50IiwidGFyZ2V0IiwiQWRkcmVzcyIsIlBheW1lbnQiLCJTdW1tYXJ5IiwiUmVhY3RET00iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxHQUFOLFNBQWtCQyxLQUFLLENBQUNDLFNBQXhCLENBQWtDO0FBQ2hDQyxFQUFBQSxXQUFXLENBQUNDLEtBQUQsRUFBUTtBQUNqQixVQUFNQSxLQUFOO0FBQ0EsU0FBS0MsS0FBTCxHQUFhO0FBQ1hDLE1BQUFBLFFBQVEsRUFBRSxDQURDO0FBRVhDLE1BQUFBLHFCQUFxQixFQUFFLElBRlo7QUFHWEMsTUFBQUEsU0FBUyxFQUFFLEVBSEE7QUFJWEMsTUFB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QWlCLENBQUMyQixLQUFLLENBQUNDLE1BQU4sQ0FBYTlCLEtBQWQsQ0FBakI7QUFBc0M7QUFEckQsRUFERixDQURGLENBUkYsZUFjRSwrQ0FDRSw0REFDRTtBQUFPLEVBQUEsSUFBSSxFQUFDLE1BQVo7QUFBbUIsRUFBQSxXQUFXLEVBQUMsY0FBL0I7QUFBOEMsRUFBQSxLQUFLLEVBQUVLLGdCQUFnQixFQUFyRTtBQUNBLEVBQUEsUUFBUSxFQUFFLE1BQUk7QUFBQ0QsSUFBQUEsb0JBQW9CLENBQUN5QixLQUFLLENBQUNDLE1BQU4sQ0FBYTlCLEtBQWQsQ0FBcEI7QUFBeUM7QUFEeEQsRUFERixDQURGLENBZEYsZUFvQkU7QUFBUSxFQUFBLElBQUksRUFBQyxRQUFiO0FBQXNCLEVBQUEsT0FBTyxFQUUzQixNQUFJO0FBQ0ZKLElBQUFBLHNCQUFzQjtBQUN0QlUsSUFBQUEsa0JBQWtCO0FBQ25CO0FBTEgsVUFwQkYsQ0FIRjs7QUFrQ0EsSUFBSXlCLE9BQU8sR0FBRyxDQUFDO0FBQUNuQyxFQUFBQTtBQUFELENBQUQsa0JBQ1osOENBQ0UsMENBREYsZUFFRTtBQUFRLEVBQUEsSUFBSSxFQUFDLFFBQWI7QUFBc0IsRUFBQSxPQUFPLEVBQzNCQTtBQURGLFVBRkYsQ0FERjs7QUFTQSxJQUFJb0MsT0FBTyxHQUFHLENBQUM7QUFBQ3BDLEVBQUFBO0FBQUQsQ0FBRCxrQkFDWiw4Q0FDRSwwQ0FERixlQUVFO0FBQVEsRUFBQSxJQUFJLEVBQUMsUUFBYjtBQUFzQixFQUFBLE9BQU8sRUFDM0JBO0FBREYsVUFGRixDQURGOztBQVNBLElBQUlxQyxPQUFPLEdBQUcsbUJBQ1osOENBQ0UsMENBREYsQ0FERjs7QUFNQUMsUUFBUSxDQUFDUCxNQUFULGVBQ0Usb0JBQUMsR0FBRCxPQURGLEVBRUVRLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixLQUF4QixDQUZGIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdGFiQ291bnQ6IDAsXG4gICAgICBjaGVja291dEJ1dHRvblZpc2libGU6IHRydWUsXG4gICAgICBuYW1lRmllbGQ6IFwiXCIsXG4gICAgICBlbWFpbEZpZWxkOlwiXCIsXG4gICAgICBwYXNzd29yZEZpZWxkOlwiXCJcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpe1xuICB9XG5cbiAgY2hlY2tvdXRPbkNsaWNrSGFuZGxlciAoKSB7XG4gICAgdmFyIG5ld051bSA9IHRoaXMuc3RhdGUudGFiQ291bnQgKyAxO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdGFiQ291bnQ6IG5ld051bSxcbiAgICAgIGNoZWNrb3V0QnV0dG9uVmlzaWJsZTogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlTmFtZUNoYW5nZSAodmFsdWUpIHt0aGlzLnNldFN0YXRlKHsgbmFtZUZpZWxkOiB2YWx1ZSB9KX1cbiAgZ2V0TmFtZVN0YXRlICgpIHtyZXR1cm4gdGhpcy5zdGF0ZS5uYW1lRmllbGR9XG5cbiAgaGFuZGxlRW1haWxDaGFuZ2UgKHZhbHVlKSB7dGhpcy5zZXRTdGF0ZSh7IGVtYWlsRmllbGQ6IHZhbHVlIH0pfVxuICBnZXRFbWFpbFN0YXRlICgpIHtyZXR1cm4gdGhpcy5zdGF0ZS5lbWFpbEZpZWxkfVxuXG4gIGhhbmRsZVBhc3N3b3JkQ2hhbmdlICh2YWx1ZSkge3RoaXMuc2V0U3RhdGUoeyBwYXNzd29yZEZpZWxkOiB2YWx1ZSB9KX1cbiAgZ2V0UGFzc3dvcmRTdGF0ZSAoKSB7cmV0dXJuIHRoaXMuc3RhdGUucGFzc3dvcmRGaWVsZH1cblxuICBzdWJtaXRQZXJzb25hbERhdGEgKCkge1xuICAgIGlmKHRoaXMuc3RhdGUubmFtZUZpZWxkLmxlbmd0aCAhPT0gMCB8fCB0aGlzLnN0YXRlLmVtYWlsRmllbGQubGVuZ3RoICE9PTAgfHxcbiAgICB0aGlzLnN0YXRlLnBhc3N3b3JkRmllbGQubGVuZ3RoICE9PTApIHtcbiAgICAgIHZhciBuZXdPYmogPSB7XG4gICAgICAgIG5hbWU6IHRoaXMuc3RhdGUubmFtZUZpZWxkLFxuICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5lbWFpbEZpZWxkLFxuICAgICAgICBwYXNzd29yZDogdGhpcy5zdGF0ZS5wYXNzd29yZEZpZWxkfVxuICAgICAgdGhpcy5wb3N0UGVyc29uYWxEYXRhKG5ld09iaiwgKGVyciwgcmVzdWx0KT0+e1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1BPU1QgRVJST1InKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdJVEVNIFBPU1RFRCcpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgcG9zdFBlcnNvbmFsRGF0YSAobmV3T2JqLCBjYWxsYmFjaykge1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6J2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdXNlcnMnLFxuICAgICAgbWV0aG9kOidQT1NUJyxcbiAgICAgIGRhdGE6IG5ld09iaixcbiAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpXG4gICAgICB9LFxuICAgICAgZXJyb3I6IChlcnIpID0+IHtcbiAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICB0YWJSZXR1cm4gKCkge1xuICAgIGlmKHRoaXMuc3RhdGUudGFiQ291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIDxoMT48L2gxPlxuICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS50YWJDb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gPFBlcnNvbmFsRGF0YVxuICAgICAgICBjaGVja291dE9uQ2xpY2tIYW5kbGVyPXt0aGlzLmNoZWNrb3V0T25DbGlja0hhbmRsZXIuYmluZCh0aGlzKX1cbiAgICAgICAgaGFuZGxlTmFtZUNoYW5nZT17dGhpcy5oYW5kbGVOYW1lQ2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgIGdldE5hbWVTdGF0ZT17dGhpcy5nZXROYW1lU3RhdGUuYmluZCh0aGlzKX1cbiAgICAgICAgaGFuZGxlRW1haWxDaGFuZ2U9e3RoaXMuaGFuZGxlRW1haWxDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgZ2V0RW1haWxTdGF0ZT17dGhpcy5nZXRFbWFpbFN0YXRlLmJpbmQodGhpcyl9XG4gICAgICAgIGhhbmRsZVBhc3N3b3JkQ2hhbmdlPXt0aGlzLmhhbmRsZVBhc3N3b3JkQ2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgIGdldFBhc3N3b3JkU3RhdGU9e3RoaXMuZ2V0UGFzc3dvcmRTdGF0ZS5iaW5kKHRoaXMpfVxuICAgICAgICBzdWJtaXRQZXJzb25hbERhdGE9e3RoaXMuc3VibWl0UGVyc29uYWxEYXRhLmJpbmQodGhpcyl9XG4gICAgICAgIC8+XG4gICAgfSBlbHNlIGlmKHRoaXMuc3RhdGUudGFiQ291bnQgPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIDxBZGRyZXNzXG4gICAgICAgIGNoZWNrb3V0T25DbGlja0hhbmRsZXI9e3RoaXMuY2hlY2tvdXRPbkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpfVxuICAgICAgICAvPlxuICAgIH0gZWxzZSBpZih0aGlzLnN0YXRlLnRhYkNvdW50ID09PSAzKSB7XG4gICAgICAgIHJldHVybiA8UGF5bWVudFxuICAgICAgICBjaGVja291dE9uQ2xpY2tIYW5kbGVyPXt0aGlzLmNoZWNrb3V0T25DbGlja0hhbmRsZXIuYmluZCh0aGlzKX1cbiAgICAgICAgLz5cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gPFN1bW1hcnkgLz5cbiAgICB9XG4gIH1cblxuICByZW5kZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbidcbiAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnN0YXRlLmNoZWNrb3V0QnV0dG9uVmlzaWJsZSA/ICdjaGVja291dC1idG4tdmlzJyA6ICdjaGVja291dC1idG4tbm9uZSd9XG4gICAgICAgIG9uQ2xpY2s9e3RoaXMuY2hlY2tvdXRPbkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpfVxuICAgICAgICA+Q2hlY2tvdXQ8L2J1dHRvbj5cbiAgICAgICAge3RoaXMudGFiUmV0dXJuKCl9XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxudmFyIFBlcnNvbmFsRGF0YSA9ICh7XG4gIGNoZWNrb3V0T25DbGlja0hhbmRsZXIsIGhhbmRsZU5hbWVDaGFuZ2UsIGdldE5hbWVTdGF0ZSwgZ2V0RW1haWxTdGF0ZSwgaGFuZGxlRW1haWxDaGFuZ2UsIGdldFBhc3N3b3JkU3RhdGUsIGhhbmRsZVBhc3N3b3JkQ2hhbmdlLCBzdWJtaXRQZXJzb25hbERhdGFcbn0pID0+IChcbiAgPGRpdj5cbiAgICA8aDE+UGVyc29uYWw8L2gxPlxuICAgIDxmb3JtPlxuICAgICAgPGxhYmVsPkZ1bGwgTmFtZVxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj0nVHlwZSBoZXJlLi4uJyB2YWx1ZT17Z2V0TmFtZVN0YXRlKCl9XG4gICAgICAgIG9uQ2hhbmdlPXsoKT0+e2hhbmRsZU5hbWVDaGFuZ2UoZXZlbnQudGFyZ2V0LnZhbHVlKX19PjwvaW5wdXQ+XG4gICAgICA8L2xhYmVsPlxuICAgIDwvZm9ybT5cbiAgICA8Zm9ybT5cbiAgICAgIDxsYWJlbD5FbWFpbFxuICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj0nVHlwZSBoZXJlLi4uJyB2YWx1ZT17Z2V0RW1haWxTdGF0ZSgpfVxuICAgICAgICBvbkNoYW5nZT17KCk9PntoYW5kbGVFbWFpbENoYW5nZShldmVudC50YXJnZXQudmFsdWUpfX0+PC9pbnB1dD5cbiAgICAgIDwvbGFiZWw+XG4gICAgPC9mb3JtPlxuICAgIDxmb3JtPlxuICAgICAgPGxhYmVsPlBhc3N3b3JkXG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPSdUeXBlIGhlcmUuLi4nIHZhbHVlPXtnZXRQYXNzd29yZFN0YXRlKCl9XG4gICAgICAgIG9uQ2hhbmdlPXsoKT0+e2hhbmRsZVBhc3N3b3JkQ2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSl9fT48L2lucHV0PlxuICAgICAgPC9sYWJlbD5cbiAgICA8L2Zvcm0+XG4gICAgPGJ1dHRvbiB0eXBlPSdidXR0b24nIG9uQ2xpY2s9e1xuXG4gICAgICAoKT0+e1xuICAgICAgICBjaGVja291dE9uQ2xpY2tIYW5kbGVyKClcbiAgICAgICAgc3VibWl0UGVyc29uYWxEYXRhKClcbiAgICAgIH1cblxuICAgICAgfT5OZXh0PC9idXR0b24+XG4gIDwvZGl2PlxuKVxuXG52YXIgQWRkcmVzcyA9ICh7Y2hlY2tvdXRPbkNsaWNrSGFuZGxlcn0pID0+IChcbiAgPGRpdj5cbiAgICA8aDE+QWRkcmVzczwvaDE+XG4gICAgPGJ1dHRvbiB0eXBlPSdidXR0b24nIG9uQ2xpY2s9e1xuICAgICAgY2hlY2tvdXRPbkNsaWNrSGFuZGxlclxuICAgICAgfT5OZXh0PC9idXR0b24+XG4gIDwvZGl2PlxuKVxuXG52YXIgUGF5bWVudCA9ICh7Y2hlY2tvdXRPbkNsaWNrSGFuZGxlcn0pID0+IChcbiAgPGRpdj5cbiAgICA8aDE+UGF5bWVudDwvaDE+XG4gICAgPGJ1dHRvbiB0eXBlPSdidXR0b24nIG9uQ2xpY2s9e1xuICAgICAgY2hlY2tvdXRPbkNsaWNrSGFuZGxlclxuICAgICAgfT5OZXh0PC9idXR0b24+XG4gIDwvZGl2PlxuKVxuXG52YXIgU3VtbWFyeSA9ICgpID0+IChcbiAgPGRpdj5cbiAgICA8aDE+U3VtbWFyeTwvaDE+XG4gIDwvZGl2PlxuKVxuXG5SZWFjdERPTS5yZW5kZXIoXG4gIDxBcHAgLz4sXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcHAnKVxuKVxuXG4iXX0=